package app.bot;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import java.sql.SQLException;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.ExecutionException;

import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.fluent.Request;

import com.fasterxml.jackson.core.JsonParseException;
import com.fasterxml.jackson.databind.JsonMappingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.linecorp.bot.model.action.URIAction;

import aphttp.ApHttp;
import app.bot.reqbody.WebHookObject;
import app.notify.Notify;
import app.notify.OauthToken;
import cube.http.reqresp.ReqResp;
import cube.webber.IWebEnum;
import cube.webber.ReqUri;
import cube.webber.WebCache;
import kv.str.StrMap;
import lst.Lst;
import opt.Opt;
import resource.ResourceUtil;
import scala.reflect.internal.Symbols.SymbolOps;
import twhist.TWQHist;
/**
 * @author 
 */
public enum BotWeb implements IWebEnum<Bot, BotWeb> {
	root("首頁") {
		@Override
		public Object handle(Bot bot, ReqResp rr) {
//        	rr.queryParam("");
			String htmlTemplate = ResourceUtil.loadString("/res/index.html");

			return rr.queryParamOr("msg", "hello");
		}

	},
    // 後端配合前端 spa
    app("功能頁面", new ReqUri("/app/*")) {
        @Override
        public Object handle(Bot bot, ReqResp rr) {
            String htmlTemplate = ResourceUtil.loadString("/res/index.html");
            return htmlTemplate;
        }
    },
    
	//要填在 line developer -> Webhook URL 
	//與line server交互, 會從這裡傳用戶訊息的json
	webhook_post("首頁") {
		@Override
		public Object handle(Bot bot, ReqResp rr) throws NoSuchAlgorithmException, InvalidKeyException,
				InterruptedException, ExecutionException, JsonParseException, JsonMappingException, IOException, SQLException {
			ObjectMapper mapper = new ObjectMapper();

			String htmlTemplate = ResourceUtil.loadString("/res/index.html");
			
			//進來的json 轉成 WebHookObject
			WebHookObject whobj = mapper.readValue(rr.reqBody(), WebHookObject.class);
			System.out.println("用戶傳來的json訊息： "+rr.reqBody());
			
			bot.handleWebHookObj(whobj);
			
//			bot.que.offer(whobj);
//			post2Server(bot);

			return "{}";
		}

	},
	
	webhookSignUp_post("首頁") {
		@Override
		public Object handle(Bot bot, ReqResp rr) throws NoSuchAlgorithmException, InvalidKeyException,
				InterruptedException, ExecutionException, JsonParseException, JsonMappingException, IOException, SQLException {
			ObjectMapper mapper = new ObjectMapper();

			String htmlTemplate = ResourceUtil.loadString("/res/index.html");
			
			//進來的json 轉成 WebHookObject
			WebHookObject whobj = mapper.readValue(rr.reqBody(), WebHookObject.class);
			System.out.println("用戶傳來的json訊息： "+rr.reqBody());
			
			bot.handleWebHookObj(whobj);

			return "{}";
		}

	},
	
	
//	kchart2("kchart"){
//		@Override
//		public Object handle(Bot bot, ReqResp rr) throws NoSuchAlgorithmException, InvalidKeyException,
//				InterruptedException, ExecutionException, JsonParseException, JsonMappingException, IOException, SQLException {
//			rr.resp().contentType("image/png;");
//			Request ofPostRequest = ApHttp.ofPostRequest("http://pway.prj.tw:3000", "{\"infile\":{\"title\":{\"text\":\"2412中華電\"},\"series\":[{\"type\":\"candlestick\",\"name\":\"candle\",\"data\":[{\"x\":1.53504E12,\"open\":108.0,\"high\":108.0,\"low\":107.5,\"close\":107.5,\"value\":5155780.0,\"diff\":0.0},{\"x\":1.5352992E12,\"open\":108.0,\"high\":108.5,\"low\":107.5,\"close\":108.0,\"value\":6630316.0,\"diff\":0.0},{\"x\":1.5353856E12,\"open\":108.5,\"high\":108.5,\"low\":108.0,\"close\":108.5,\"value\":3887054.0,\"diff\":0.0},{\"x\":1.535472E12,\"open\":108.5,\"high\":108.5,\"low\":108.0,\"close\":108.5,\"value\":2401013.0,\"diff\":0.0},{\"x\":1.5355584E12,\"open\":108.0,\"high\":108.5,\"low\":107.5,\"close\":107.5,\"value\":7594142.0,\"diff\":0.0},{\"x\":1.5356448E12,\"open\":107.5,\"high\":108.5,\"low\":107.5,\"close\":108.5,\"value\":7486005.0,\"diff\":0.0},{\"x\":1.535904E12,\"open\":108.0,\"high\":108.5,\"low\":108.0,\"close\":108.0,\"value\":4656278.0,\"diff\":0.0},{\"x\":1.5359904E12,\"open\":108.0,\"high\":108.5,\"low\":108.0,\"close\":108.5,\"value\":4456394.0,\"diff\":0.0},{\"x\":1.5360768E12,\"open\":108.0,\"high\":108.5,\"low\":108.0,\"close\":108.0,\"value\":7152841.0,\"diff\":0.0},{\"x\":1.5361632E12,\"open\":107.5,\"high\":108.0,\"low\":107.5,\"close\":107.5,\"value\":5696327.0,\"diff\":0.0},{\"x\":1.5362496E12,\"open\":107.5,\"high\":108.5,\"low\":107.5,\"close\":108.0,\"value\":1.1354235E7,\"diff\":0.0},{\"x\":1.5365088E12,\"open\":108.0,\"high\":109.0,\"low\":108.0,\"close\":108.5,\"value\":1.1367017E7,\"diff\":0.0},{\"x\":1.5365952E12,\"open\":108.5,\"high\":110.0,\"low\":108.5,\"close\":110.0,\"value\":1.5396852E7,\"diff\":0.0},{\"x\":1.5366816E12,\"open\":110.0,\"high\":110.5,\"low\":109.5,\"close\":110.0,\"value\":1.2095889E7,\"diff\":0.0},{\"x\":1.536768E12,\"open\":109.5,\"high\":110.0,\"low\":109.0,\"close\":109.5,\"value\":7442732.0,\"diff\":0.0},{\"x\":1.5368544E12,\"open\":109.0,\"high\":109.5,\"low\":108.5,\"close\":108.5,\"value\":7837764.0,\"diff\":0.0},{\"x\":1.5371136E12,\"open\":109.0,\"high\":109.5,\"low\":108.5,\"close\":108.5,\"value\":7346777.0,\"diff\":0.0},{\"x\":1.5372E12,\"open\":108.5,\"high\":110.5,\"low\":108.5,\"close\":110.0,\"value\":1.193114E7,\"diff\":0.0},{\"x\":1.5372864E12,\"open\":110.0,\"high\":110.5,\"low\":109.5,\"close\":110.5,\"value\":7356238.0,\"diff\":0.0},{\"x\":1.5373728E12,\"open\":110.0,\"high\":110.5,\"low\":109.5,\"close\":110.0,\"value\":6076696.0,\"diff\":0.0},{\"x\":1.5374592E12,\"open\":110.0,\"high\":110.5,\"low\":109.5,\"close\":109.5,\"value\":1.0978388E7,\"diff\":0.0},{\"x\":1.5378048E12,\"open\":109.5,\"high\":110.0,\"low\":109.0,\"close\":109.5,\"value\":4508340.0,\"diff\":0.0},{\"x\":1.5378912E12,\"open\":110.0,\"high\":110.0,\"low\":109.5,\"close\":109.5,\"value\":4356022.0,\"diff\":0.0},{\"x\":1.5379776E12,\"open\":109.0,\"high\":110.5,\"low\":109.0,\"close\":110.0,\"value\":6493210.0,\"diff\":0.0},{\"x\":1.538064E12,\"open\":110.0,\"high\":110.5,\"low\":109.5,\"close\":110.0,\"value\":5173386.0,\"diff\":0.0},{\"x\":1.5383232E12,\"open\":110.0,\"high\":110.5,\"low\":110.0,\"close\":110.5,\"value\":2971568.0,\"diff\":0.0},{\"x\":1.5384096E12,\"open\":110.0,\"high\":110.5,\"low\":109.5,\"close\":109.5,\"value\":6630230.0,\"diff\":0.0},{\"x\":1.538496E12,\"open\":109.5,\"high\":109.5,\"low\":108.5,\"close\":109.0,\"value\":5166464.0,\"diff\":0.0},{\"x\":1.5385824E12,\"open\":109.0,\"high\":109.0,\"low\":108.0,\"close\":108.0,\"value\":6808862.0,\"diff\":0.0},{\"x\":1.5386688E12,\"open\":108.0,\"high\":109.5,\"low\":107.5,\"close\":109.0,\"value\":1.336006E7,\"diff\":0.0},{\"x\":1.538928E12,\"open\":109.0,\"high\":109.0,\"low\":108.0,\"close\":108.5,\"value\":6160646.0,\"diff\":0.0},{\"x\":1.5390144E12,\"open\":108.5,\"high\":110.0,\"low\":108.5,\"close\":109.5,\"value\":8693012.0,\"diff\":0.0},{\"x\":1.5391872E12,\"open\":108.0,\"high\":109.5,\"low\":108.0,\"close\":108.5,\"value\":2.5740666E7,\"diff\":0.0},{\"x\":1.5392736E12,\"open\":108.0,\"high\":108.0,\"low\":107.0,\"close\":108.0,\"value\":1.545647E7,\"diff\":0.0},{\"x\":1.5395328E12,\"open\":107.5,\"high\":107.5,\"low\":106.5,\"close\":106.5,\"value\":1.2580518E7,\"diff\":0.0},{\"x\":1.5396192E12,\"open\":106.5,\"high\":107.5,\"low\":106.0,\"close\":107.0,\"value\":8396946.0,\"diff\":0.0},{\"x\":1.5397056E12,\"open\":107.5,\"high\":108.0,\"low\":106.5,\"close\":107.0,\"value\":8091642.0,\"diff\":0.0},{\"x\":1.539792E12,\"open\":106.5,\"high\":108.5,\"low\":106.5,\"close\":107.5,\"value\":1.1823121E7,\"diff\":0.0},{\"x\":1.5398784E12,\"open\":107.5,\"high\":107.5,\"low\":106.5,\"close\":106.5,\"value\":6938337.0,\"diff\":0.0},{\"x\":1.5401376E12,\"open\":106.5,\"high\":107.5,\"low\":106.5,\"close\":107.5,\"value\":3662494.0,\"diff\":0.0},{\"x\":1.540224E12,\"open\":106.5,\"high\":107.5,\"low\":106.5,\"close\":106.5,\"value\":6804496.0,\"diff\":0.0},{\"x\":1.5403104E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.0,\"value\":9982856.0,\"diff\":0.0},{\"x\":1.5403968E12,\"open\":106.5,\"high\":108.0,\"low\":106.5,\"close\":108.0,\"value\":1.5176952E7,\"diff\":0.0},{\"x\":1.5404832E12,\"open\":107.5,\"high\":109.0,\"low\":107.0,\"close\":109.0,\"value\":2.3919196E7,\"diff\":0.0},{\"x\":1.5407424E12,\"open\":108.5,\"high\":110.0,\"low\":108.0,\"close\":109.5,\"value\":1.1435905E7,\"diff\":0.0},{\"x\":1.5408288E12,\"open\":109.5,\"high\":109.5,\"low\":108.0,\"close\":108.5,\"value\":7889337.0,\"diff\":0.0},{\"x\":1.5409152E12,\"open\":108.5,\"high\":109.5,\"low\":108.5,\"close\":109.5,\"value\":9326798.0,\"diff\":0.0},{\"x\":1.5410016E12,\"open\":108.5,\"high\":108.5,\"low\":107.0,\"close\":107.0,\"value\":1.6931776E7,\"diff\":0.0},{\"x\":1.541088E12,\"open\":107.0,\"high\":107.0,\"low\":104.5,\"close\":106.0,\"value\":3.1311728E7,\"diff\":0.0},{\"x\":1.5413472E12,\"open\":105.5,\"high\":106.0,\"low\":105.0,\"close\":105.5,\"value\":1.0322127E7,\"diff\":0.0},{\"x\":1.5414336E12,\"open\":105.5,\"high\":106.5,\"low\":105.0,\"close\":106.0,\"value\":6923852.0,\"diff\":0.0},{\"x\":1.54152E12,\"open\":106.0,\"high\":107.0,\"low\":106.0,\"close\":107.0,\"value\":7328952.0,\"diff\":0.0},{\"x\":1.5416064E12,\"open\":107.0,\"high\":107.5,\"low\":107.0,\"close\":107.0,\"value\":7037932.0,\"diff\":0.0},{\"x\":1.5416928E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.0,\"value\":3425196.0,\"diff\":0.0},{\"x\":1.541952E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":106.5,\"value\":6529612.0,\"diff\":0.0},{\"x\":1.5420384E12,\"open\":106.0,\"high\":107.0,\"low\":105.5,\"close\":107.0,\"value\":7318324.0,\"diff\":0.0},{\"x\":1.5421248E12,\"open\":107.0,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":5348291.0,\"diff\":0.0},{\"x\":1.5422112E12,\"open\":107.5,\"high\":108.0,\"low\":106.0,\"close\":107.0,\"value\":1.0448823E7,\"diff\":0.0},{\"x\":1.5422976E12,\"open\":107.0,\"high\":107.0,\"low\":106.0,\"close\":106.0,\"value\":8161044.0,\"diff\":0.0},{\"x\":1.5425568E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":8596639.0,\"diff\":0.0},{\"x\":1.5426432E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":107.0,\"value\":3583586.0,\"diff\":0.0},{\"x\":1.5427296E12,\"open\":106.5,\"high\":107.5,\"low\":106.0,\"close\":107.0,\"value\":9920679.0,\"diff\":0.0},{\"x\":1.542816E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.5,\"value\":3891043.0,\"diff\":0.0},{\"x\":1.5429024E12,\"open\":107.5,\"high\":108.0,\"low\":107.0,\"close\":108.0,\"value\":6703959.0,\"diff\":0.0},{\"x\":1.5431616E12,\"open\":107.5,\"high\":108.0,\"low\":107.0,\"close\":107.5,\"value\":7563459.0,\"diff\":0.0},{\"x\":1.543248E12,\"open\":107.5,\"high\":108.0,\"low\":107.0,\"close\":107.5,\"value\":4942661.0,\"diff\":0.0},{\"x\":1.5433344E12,\"open\":107.5,\"high\":108.0,\"low\":106.5,\"close\":107.5,\"value\":9827267.0,\"diff\":0.0},{\"x\":1.5434208E12,\"open\":108.0,\"high\":108.0,\"low\":106.5,\"close\":106.5,\"value\":7897401.0,\"diff\":0.0},{\"x\":1.5435072E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.0,\"value\":1.4284384E7,\"diff\":0.0},{\"x\":1.5437664E12,\"open\":107.5,\"high\":107.5,\"low\":106.0,\"close\":106.0,\"value\":1.4646163E7,\"diff\":0.0},{\"x\":1.5438528E12,\"open\":106.0,\"high\":107.0,\"low\":106.0,\"close\":106.0,\"value\":8034070.0,\"diff\":0.0},{\"x\":1.5439392E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":3298152.0,\"diff\":0.0},{\"x\":1.5440256E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":6655787.0,\"diff\":0.0},{\"x\":1.544112E12,\"open\":106.5,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":4124962.0,\"diff\":0.0},{\"x\":1.5443712E12,\"open\":106.5,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":4948858.0,\"diff\":0.0},{\"x\":1.5444576E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.5,\"value\":4849141.0,\"diff\":0.0},{\"x\":1.544544E12,\"open\":107.5,\"high\":107.5,\"low\":107.0,\"close\":107.5,\"value\":6625820.0,\"diff\":0.0},{\"x\":1.5446304E12,\"open\":107.5,\"high\":107.5,\"low\":107.0,\"close\":107.5,\"value\":5805098.0,\"diff\":0.0},{\"x\":1.5447168E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.5,\"value\":7021979.0,\"diff\":0.0},{\"x\":1.544976E12,\"open\":107.5,\"high\":107.5,\"low\":107.0,\"close\":107.5,\"value\":3820305.0,\"diff\":0.0},{\"x\":1.5450624E12,\"open\":107.5,\"high\":107.5,\"low\":106.5,\"close\":106.5,\"value\":5275321.0,\"diff\":0.0},{\"x\":1.5451488E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.5,\"value\":4881155.0,\"diff\":0.0},{\"x\":1.5452352E12,\"open\":107.0,\"high\":107.5,\"low\":107.0,\"close\":107.5,\"value\":4204769.0,\"diff\":0.0},{\"x\":1.5453216E12,\"open\":107.0,\"high\":107.5,\"low\":107.0,\"close\":107.5,\"value\":5731435.0,\"diff\":0.0},{\"x\":1.545408E12,\"open\":107.5,\"high\":108.0,\"low\":107.0,\"close\":108.0,\"value\":6484126.0,\"diff\":0.0},{\"x\":1.5455808E12,\"open\":107.5,\"high\":108.0,\"low\":106.5,\"close\":107.0,\"value\":7191182.0,\"diff\":0.0},{\"x\":1.5456672E12,\"open\":106.5,\"high\":107.5,\"low\":106.0,\"close\":106.5,\"value\":7194040.0,\"diff\":0.0},{\"x\":1.5457536E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.0,\"value\":1.1874355E7,\"diff\":0.0},{\"x\":1.54584E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":7382343.0,\"diff\":0.0},{\"x\":1.5459264E12,\"open\":107.0,\"high\":113.0,\"low\":106.5,\"close\":113.0,\"value\":2.3472272E7,\"diff\":0.0},{\"x\":1.5463584E12,\"open\":108.0,\"high\":108.5,\"low\":107.0,\"close\":107.0,\"value\":1.0664118E7,\"diff\":0.0},{\"x\":1.5464448E12,\"open\":107.5,\"high\":107.5,\"low\":107.0,\"close\":107.0,\"value\":5508818.0,\"diff\":0.0},{\"x\":1.5465312E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.5,\"value\":5947097.0,\"diff\":0.0},{\"x\":1.5467904E12,\"open\":108.0,\"high\":108.0,\"low\":107.5,\"close\":108.0,\"value\":5665348.0,\"diff\":0.0},{\"x\":1.5468768E12,\"open\":108.0,\"high\":108.0,\"low\":107.0,\"close\":107.0,\"value\":7607006.0,\"diff\":0.0},{\"x\":1.5469632E12,\"open\":107.5,\"high\":107.5,\"low\":107.0,\"close\":107.5,\"value\":8300702.0,\"diff\":0.0},{\"x\":1.5470496E12,\"open\":106.5,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":6220751.0,\"diff\":0.0},{\"x\":1.547136E12,\"open\":107.0,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":6847797.0,\"diff\":0.0},{\"x\":1.5473952E12,\"open\":107.0,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":6641129.0,\"diff\":0.0},{\"x\":1.5474816E12,\"open\":106.5,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":5968885.0,\"diff\":0.0},{\"x\":1.547568E12,\"open\":106.5,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":5727210.0,\"diff\":0.0},{\"x\":1.5476544E12,\"open\":106.5,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":4311517.0,\"diff\":0.0},{\"x\":1.5477408E12,\"open\":107.0,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":6127169.0,\"diff\":0.0},{\"x\":1.548E12,\"open\":107.0,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":7168975.0,\"diff\":0.0},{\"x\":1.5480864E12,\"open\":106.5,\"high\":107.5,\"low\":106.5,\"close\":107.5,\"value\":1.0011495E7,\"diff\":0.0},{\"x\":1.5481728E12,\"open\":107.0,\"high\":108.0,\"low\":106.5,\"close\":107.0,\"value\":5558447.0,\"diff\":0.0},{\"x\":1.5482592E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.0,\"value\":7790106.0,\"diff\":0.0},{\"x\":1.5483456E12,\"open\":107.0,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":7838333.0,\"diff\":0.0},{\"x\":1.5486048E12,\"open\":106.5,\"high\":107.0,\"low\":106.5,\"close\":106.5,\"value\":7458995.0,\"diff\":0.0},{\"x\":1.5486912E12,\"open\":107.0,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":7233532.0,\"diff\":0.0},{\"x\":1.5487776E12,\"open\":107.0,\"high\":107.0,\"low\":106.5,\"close\":107.0,\"value\":9310055.0,\"diff\":0.0},{\"x\":1.5498144E12,\"open\":107.5,\"high\":108.0,\"low\":106.5,\"close\":106.5,\"value\":1.5270358E7,\"diff\":0.0},{\"x\":1.5499008E12,\"open\":107.0,\"high\":107.5,\"low\":106.5,\"close\":107.0,\"value\":1.2912519E7,\"diff\":0.0},{\"x\":1.5499872E12,\"open\":107.0,\"high\":107.0,\"low\":106.0,\"close\":106.0,\"value\":1.1838394E7,\"diff\":0.0},{\"x\":1.5500736E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.0,\"value\":7964309.0,\"diff\":0.0},{\"x\":1.55016E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":8260742.0,\"diff\":0.0},{\"x\":1.5504192E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.5,\"value\":8435027.0,\"diff\":0.0},{\"x\":1.5505056E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":106.0,\"value\":5957214.0,\"diff\":0.0},{\"x\":1.550592E12,\"open\":106.0,\"high\":106.5,\"low\":106.0,\"close\":106.5,\"value\":9254102.0,\"diff\":0.0},{\"x\":1.5506784E12,\"open\":106.0,\"high\":106.5,\"low\":106.0,\"close\":106.5,\"value\":7410452.0,\"diff\":0.0},{\"x\":1.5507648E12,\"open\":106.5,\"high\":107.0,\"low\":106.0,\"close\":107.0,\"value\":7165562.0,\"diff\":0.0}]},{\"type\":\"spline\",\"name\":\"sma5\",\"data\":[{\"x\":1.53504E12,\"y\":107.9},{\"x\":1.5352992E12,\"y\":108.1},{\"x\":1.5353856E12,\"y\":108.1},{\"x\":1.535472E12,\"y\":108.2},{\"x\":1.5355584E12,\"y\":108.0},{\"x\":1.5356448E12,\"y\":108.2},{\"x\":1.535904E12,\"y\":108.2},{\"x\":1.5359904E12,\"y\":108.2},{\"x\":1.5360768E12,\"y\":108.1},{\"x\":1.5361632E12,\"y\":108.1},{\"x\":1.5362496E12,\"y\":108.0},{\"x\":1.5365088E12,\"y\":108.1},{\"x\":1.5365952E12,\"y\":108.4},{\"x\":1.5366816E12,\"y\":108.8},{\"x\":1.536768E12,\"y\":109.2},{\"x\":1.5368544E12,\"y\":109.3},{\"x\":1.5371136E12,\"y\":109.3},{\"x\":1.5372E12,\"y\":109.3},{\"x\":1.5372864E12,\"y\":109.4},{\"x\":1.5373728E12,\"y\":109.5},{\"x\":1.5374592E12,\"y\":109.7},{\"x\":1.5378048E12,\"y\":109.9},{\"x\":1.5378912E12,\"y\":109.8},{\"x\":1.5379776E12,\"y\":109.7},{\"x\":1.538064E12,\"y\":109.7},{\"x\":1.5383232E12,\"y\":109.9},{\"x\":1.5384096E12,\"y\":109.9},{\"x\":1.538496E12,\"y\":109.8},{\"x\":1.5385824E12,\"y\":109.4},{\"x\":1.5386688E12,\"y\":109.2},{\"x\":1.538928E12,\"y\":108.8},{\"x\":1.5390144E12,\"y\":108.8},{\"x\":1.5391872E12,\"y\":108.7},{\"x\":1.5392736E12,\"y\":108.7},{\"x\":1.5395328E12,\"y\":108.2},{\"x\":1.5396192E12,\"y\":107.9},{\"x\":1.5397056E12,\"y\":107.4},{\"x\":1.539792E12,\"y\":107.2},{\"x\":1.5398784E12,\"y\":106.9},{\"x\":1.5401376E12,\"y\":107.1},{\"x\":1.540224E12,\"y\":107.0},{\"x\":1.5403104E12,\"y\":107.0},{\"x\":1.5403968E12,\"y\":107.1},{\"x\":1.5404832E12,\"y\":107.6},{\"x\":1.5407424E12,\"y\":108.0},{\"x\":1.5408288E12,\"y\":108.4},{\"x\":1.5409152E12,\"y\":108.9},{\"x\":1.5410016E12,\"y\":108.7},{\"x\":1.541088E12,\"y\":108.1},{\"x\":1.5413472E12,\"y\":107.3},{\"x\":1.5414336E12,\"y\":106.8},{\"x\":1.54152E12,\"y\":106.3},{\"x\":1.5416064E12,\"y\":106.3},{\"x\":1.5416928E12,\"y\":106.5},{\"x\":1.541952E12,\"y\":106.7},{\"x\":1.5420384E12,\"y\":106.9},{\"x\":1.5421248E12,\"y\":106.9},{\"x\":1.5422112E12,\"y\":106.9},{\"x\":1.5422976E12,\"y\":106.7},{\"x\":1.5425568E12,\"y\":106.7},{\"x\":1.5426432E12,\"y\":106.7},{\"x\":1.5427296E12,\"y\":106.7},{\"x\":1.542816E12,\"y\":106.8},{\"x\":1.5429024E12,\"y\":107.2},{\"x\":1.5431616E12,\"y\":107.4},{\"x\":1.543248E12,\"y\":107.5},{\"x\":1.5433344E12,\"y\":107.6},{\"x\":1.5434208E12,\"y\":107.4},{\"x\":1.5435072E12,\"y\":107.2},{\"x\":1.5437664E12,\"y\":106.9},{\"x\":1.5438528E12,\"y\":106.6},{\"x\":1.5439392E12,\"y\":106.4},{\"x\":1.5440256E12,\"y\":106.4},{\"x\":1.544112E12,\"y\":106.4},{\"x\":1.5443712E12,\"y\":106.6},{\"x\":1.5444576E12,\"y\":106.9},{\"x\":1.544544E12,\"y\":107.1},{\"x\":1.5446304E12,\"y\":107.3},{\"x\":1.5447168E12,\"y\":107.4},{\"x\":1.544976E12,\"y\":107.5},{\"x\":1.5450624E12,\"y\":107.3},{\"x\":1.5451488E12,\"y\":107.3},{\"x\":1.5452352E12,\"y\":107.3},{\"x\":1.5453216E12,\"y\":107.3},{\"x\":1.545408E12,\"y\":107.4},{\"x\":1.5455808E12,\"y\":107.5},{\"x\":1.5456672E12,\"y\":107.3},{\"x\":1.5457536E12,\"y\":107.0},{\"x\":1.54584E12,\"y\":106.8},{\"x\":1.5459264E12,\"y\":107.8},{\"x\":1.5463584E12,\"y\":107.8},{\"x\":1.5464448E12,\"y\":107.9},{\"x\":1.5465312E12,\"y\":108.2},{\"x\":1.5467904E12,\"y\":108.5},{\"x\":1.5468768E12,\"y\":107.3},{\"x\":1.5469632E12,\"y\":107.4},{\"x\":1.5470496E12,\"y\":107.4},{\"x\":1.547136E12,\"y\":107.3},{\"x\":1.5473952E12,\"y\":107.0},{\"x\":1.5474816E12,\"y\":107.0},{\"x\":1.547568E12,\"y\":106.9},{\"x\":1.5476544E12,\"y\":106.9},{\"x\":1.5477408E12,\"y\":106.9},{\"x\":1.548E12,\"y\":106.9},{\"x\":1.5480864E12,\"y\":107.0},{\"x\":1.5481728E12,\"y\":107.0},{\"x\":1.5482592E12,\"y\":107.0},{\"x\":1.5483456E12,\"y\":107.0},{\"x\":1.5486048E12,\"y\":107.0},{\"x\":1.5486912E12,\"y\":106.9},{\"x\":1.5487776E12,\"y\":106.9},{\"x\":1.5498144E12,\"y\":106.8},{\"x\":1.5499008E12,\"y\":106.8},{\"x\":1.5499872E12,\"y\":106.7},{\"x\":1.5500736E12,\"y\":106.5},{\"x\":1.55016E12,\"y\":106.4},{\"x\":1.5504192E12,\"y\":106.4},{\"x\":1.5505056E12,\"y\":106.2},{\"x\":1.550592E12,\"y\":106.3},{\"x\":1.5506784E12,\"y\":106.4},{\"x\":1.5507648E12,\"y\":106.5}]},{\"type\":\"spline\",\"name\":\"sma20\",\"data\":[{\"x\":1.53504E12,\"y\":106.88},{\"x\":1.5352992E12,\"y\":106.98},{\"x\":1.5353856E12,\"y\":107.1},{\"x\":1.535472E12,\"y\":107.23},{\"x\":1.5355584E12,\"y\":107.33},{\"x\":1.5356448E12,\"y\":107.45},{\"x\":1.535904E12,\"y\":107.53},{\"x\":1.5359904E12,\"y\":107.63},{\"x\":1.5360768E12,\"y\":107.68},{\"x\":1.5361632E12,\"y\":107.7},{\"x\":1.5362496E12,\"y\":107.73},{\"x\":1.5365088E12,\"y\":107.83},{\"x\":1.5365952E12,\"y\":107.98},{\"x\":1.5366816E12,\"y\":108.13},{\"x\":1.536768E12,\"y\":108.28},{\"x\":1.5368544E12,\"y\":108.35},{\"x\":1.5371136E12,\"y\":108.43},{\"x\":1.5372E12,\"y\":108.5},{\"x\":1.5372864E12,\"y\":108.63},{\"x\":1.5373728E12,\"y\":108.7},{\"x\":1.5374592E12,\"y\":108.8},{\"x\":1.5378048E12,\"y\":108.88},{\"x\":1.5378912E12,\"y\":108.93},{\"x\":1.5379776E12,\"y\":109.0},{\"x\":1.538064E12,\"y\":109.13},{\"x\":1.5383232E12,\"y\":109.23},{\"x\":1.5384096E12,\"y\":109.3},{\"x\":1.538496E12,\"y\":109.33},{\"x\":1.5385824E12,\"y\":109.33},{\"x\":1.5386688E12,\"y\":109.4},{\"x\":1.538928E12,\"y\":109.43},{\"x\":1.5390144E12,\"y\":109.48},{\"x\":1.5391872E12,\"y\":109.4},{\"x\":1.5392736E12,\"y\":109.3},{\"x\":1.5395328E12,\"y\":109.15},{\"x\":1.5396192E12,\"y\":109.08},{\"x\":1.5397056E12,\"y\":109.0},{\"x\":1.539792E12,\"y\":108.88},{\"x\":1.5398784E12,\"y\":108.68},{\"x\":1.5401376E12,\"y\":108.55},{\"x\":1.540224E12,\"y\":108.4},{\"x\":1.5403104E12,\"y\":108.28},{\"x\":1.5403968E12,\"y\":108.2},{\"x\":1.5404832E12,\"y\":108.15},{\"x\":1.5407424E12,\"y\":108.13},{\"x\":1.5408288E12,\"y\":108.03},{\"x\":1.5409152E12,\"y\":108.03},{\"x\":1.5410016E12,\"y\":107.93},{\"x\":1.541088E12,\"y\":107.83},{\"x\":1.5413472E12,\"y\":107.65},{\"x\":1.5414336E12,\"y\":107.53},{\"x\":1.54152E12,\"y\":107.4},{\"x\":1.5416064E12,\"y\":107.33},{\"x\":1.5416928E12,\"y\":107.28},{\"x\":1.541952E12,\"y\":107.28},{\"x\":1.5420384E12,\"y\":107.28},{\"x\":1.5421248E12,\"y\":107.28},{\"x\":1.5422112E12,\"y\":107.25},{\"x\":1.5422976E12,\"y\":107.23},{\"x\":1.5425568E12,\"y\":107.18},{\"x\":1.5426432E12,\"y\":107.2},{\"x\":1.5427296E12,\"y\":107.2},{\"x\":1.542816E12,\"y\":107.18},{\"x\":1.5429024E12,\"y\":107.13},{\"x\":1.5431616E12,\"y\":107.03},{\"x\":1.543248E12,\"y\":106.98},{\"x\":1.5433344E12,\"y\":106.88},{\"x\":1.5434208E12,\"y\":106.85},{\"x\":1.5435072E12,\"y\":106.9},{\"x\":1.5437664E12,\"y\":106.93},{\"x\":1.5438528E12,\"y\":106.93},{\"x\":1.5439392E12,\"y\":106.9},{\"x\":1.5440256E12,\"y\":106.88},{\"x\":1.544112E12,\"y\":106.88},{\"x\":1.5443712E12,\"y\":106.9},{\"x\":1.5444576E12,\"y\":106.93},{\"x\":1.544544E12,\"y\":106.95},{\"x\":1.5446304E12,\"y\":106.98},{\"x\":1.5447168E12,\"y\":107.05},{\"x\":1.544976E12,\"y\":107.1},{\"x\":1.5450624E12,\"y\":107.08},{\"x\":1.5451488E12,\"y\":107.1},{\"x\":1.5452352E12,\"y\":107.1},{\"x\":1.5453216E12,\"y\":107.08},{\"x\":1.545408E12,\"y\":107.1},{\"x\":1.5455808E12,\"y\":107.08},{\"x\":1.5456672E12,\"y\":107.03},{\"x\":1.5457536E12,\"y\":107.0},{\"x\":1.54584E12,\"y\":106.98},{\"x\":1.5459264E12,\"y\":107.33},{\"x\":1.5463584E12,\"y\":107.38},{\"x\":1.5464448E12,\"y\":107.4},{\"x\":1.5465312E12,\"y\":107.45},{\"x\":1.5467904E12,\"y\":107.5},{\"x\":1.5468768E12,\"y\":107.5},{\"x\":1.5469632E12,\"y\":107.5},{\"x\":1.5470496E12,\"y\":107.48},{\"x\":1.547136E12,\"y\":107.45},{\"x\":1.5473952E12,\"y\":107.4},{\"x\":1.5474816E12,\"y\":107.38},{\"x\":1.547568E12,\"y\":107.4},{\"x\":1.5476544E12,\"y\":107.38},{\"x\":1.5477408E12,\"y\":107.35},{\"x\":1.548E12,\"y\":107.3},{\"x\":1.5480864E12,\"y\":107.28},{\"x\":1.5481728E12,\"y\":107.28},{\"x\":1.5482592E12,\"y\":107.3},{\"x\":1.5483456E12,\"y\":107.35},{\"x\":1.5486048E12,\"y\":107.35},{\"x\":1.5486912E12,\"y\":107.05},{\"x\":1.5487776E12,\"y\":107.05},{\"x\":1.5498144E12,\"y\":107.03},{\"x\":1.5499008E12,\"y\":107.0},{\"x\":1.5499872E12,\"y\":106.9},{\"x\":1.5500736E12,\"y\":106.85},{\"x\":1.55016E12,\"y\":106.8},{\"x\":1.5504192E12,\"y\":106.78},{\"x\":1.5505056E12,\"y\":106.73},{\"x\":1.550592E12,\"y\":106.73},{\"x\":1.5506784E12,\"y\":106.7},{\"x\":1.5507648E12,\"y\":106.7}]},{\"type\":\"spline\",\"name\":\"sma60\",\"data\":[{\"x\":1.53504E12,\"y\":108.91},{\"x\":1.5352992E12,\"y\":108.88},{\"x\":1.5353856E12,\"y\":108.85},{\"x\":1.535472E12,\"y\":108.83},{\"x\":1.5355584E12,\"y\":108.78},{\"x\":1.5356448E12,\"y\":108.75},{\"x\":1.535904E12,\"y\":108.72},{\"x\":1.5359904E12,\"y\":108.7},{\"x\":1.5360768E12,\"y\":108.68},{\"x\":1.5361632E12,\"y\":108.63},{\"x\":1.5362496E12,\"y\":108.62},{\"x\":1.5365088E12,\"y\":108.6},{\"x\":1.5365952E12,\"y\":108.62},{\"x\":1.5366816E12,\"y\":108.62},{\"x\":1.536768E12,\"y\":108.62},{\"x\":1.5368544E12,\"y\":108.59},{\"x\":1.5371136E12,\"y\":108.58},{\"x\":1.5372E12,\"y\":108.58},{\"x\":1.5372864E12,\"y\":108.6},{\"x\":1.5373728E12,\"y\":108.6},{\"x\":1.5374592E12,\"y\":108.59},{\"x\":1.5378048E12,\"y\":108.59},{\"x\":1.5378912E12,\"y\":108.57},{\"x\":1.5379776E12,\"y\":108.54},{\"x\":1.538064E12,\"y\":108.51},{\"x\":1.5383232E12,\"y\":108.48},{\"x\":1.5384096E12,\"y\":108.44},{\"x\":1.538496E12,\"y\":108.38},{\"x\":1.5385824E12,\"y\":108.32},{\"x\":1.5386688E12,\"y\":108.28},{\"x\":1.538928E12,\"y\":108.23},{\"x\":1.5390144E12,\"y\":108.19},{\"x\":1.5391872E12,\"y\":108.13},{\"x\":1.5392736E12,\"y\":108.07},{\"x\":1.5395328E12,\"y\":107.98},{\"x\":1.5396192E12,\"y\":107.91},{\"x\":1.5397056E12,\"y\":107.92},{\"x\":1.539792E12,\"y\":107.95},{\"x\":1.5398784E12,\"y\":107.98},{\"x\":1.5401376E12,\"y\":108.01},{\"x\":1.540224E12,\"y\":108.03},{\"x\":1.5403104E12,\"y\":108.04},{\"x\":1.5403968E12,\"y\":108.08},{\"x\":1.5404832E12,\"y\":108.13},{\"x\":1.5407424E12,\"y\":108.19},{\"x\":1.5408288E12,\"y\":108.23},{\"x\":1.5409152E12,\"y\":108.28},{\"x\":1.5410016E12,\"y\":108.29},{\"x\":1.541088E12,\"y\":108.28},{\"x\":1.5413472E12,\"y\":108.25},{\"x\":1.5414336E12,\"y\":108.23},{\"x\":1.54152E12,\"y\":108.23},{\"x\":1.5416064E12,\"y\":108.23},{\"x\":1.5416928E12,\"y\":108.23},{\"x\":1.541952E12,\"y\":108.23},{\"x\":1.5420384E12,\"y\":108.23},{\"x\":1.5421248E12,\"y\":108.23},{\"x\":1.5422112E12,\"y\":108.21},{\"x\":1.5422976E12,\"y\":108.18},{\"x\":1.5425568E12,\"y\":108.14},{\"x\":1.5426432E12,\"y\":108.13},{\"x\":1.5427296E12,\"y\":108.12},{\"x\":1.542816E12,\"y\":108.1},{\"x\":1.5429024E12,\"y\":108.09},{\"x\":1.5431616E12,\"y\":108.09},{\"x\":1.543248E12,\"y\":108.08},{\"x\":1.5433344E12,\"y\":108.07},{\"x\":1.5434208E12,\"y\":108.03},{\"x\":1.5435072E12,\"y\":108.02},{\"x\":1.5437664E12,\"y\":107.99},{\"x\":1.5438528E12,\"y\":107.96},{\"x\":1.5439392E12,\"y\":107.93},{\"x\":1.5440256E12,\"y\":107.87},{\"x\":1.544112E12,\"y\":107.82},{\"x\":1.5443712E12,\"y\":107.78},{\"x\":1.5444576E12,\"y\":107.76},{\"x\":1.544544E12,\"y\":107.74},{\"x\":1.5446304E12,\"y\":107.7},{\"x\":1.5447168E12,\"y\":107.65},{\"x\":1.544976E12,\"y\":107.61},{\"x\":1.5450624E12,\"y\":107.56},{\"x\":1.5451488E12,\"y\":107.53},{\"x\":1.5452352E12,\"y\":107.49},{\"x\":1.5453216E12,\"y\":107.45},{\"x\":1.545408E12,\"y\":107.42},{\"x\":1.5455808E12,\"y\":107.36},{\"x\":1.5456672E12,\"y\":107.31},{\"x\":1.5457536E12,\"y\":107.26},{\"x\":1.54584E12,\"y\":107.23},{\"x\":1.5459264E12,\"y\":107.3},{\"x\":1.5463584E12,\"y\":107.28},{\"x\":1.5464448E12,\"y\":107.23},{\"x\":1.5465312E12,\"y\":107.22},{\"x\":1.5467904E12,\"y\":107.22},{\"x\":1.5468768E12,\"y\":107.23},{\"x\":1.5469632E12,\"y\":107.23},{\"x\":1.5470496E12,\"y\":107.23},{\"x\":1.547136E12,\"y\":107.23},{\"x\":1.5473952E12,\"y\":107.23},{\"x\":1.5474816E12,\"y\":107.22},{\"x\":1.547568E12,\"y\":107.23},{\"x\":1.5476544E12,\"y\":107.23},{\"x\":1.5477408E12,\"y\":107.21},{\"x\":1.548E12,\"y\":107.17},{\"x\":1.5480864E12,\"y\":107.13},{\"x\":1.5481728E12,\"y\":107.11},{\"x\":1.5482592E12,\"y\":107.07},{\"x\":1.5483456E12,\"y\":107.07},{\"x\":1.5486048E12,\"y\":107.08},{\"x\":1.5486912E12,\"y\":107.1},{\"x\":1.5487776E12,\"y\":107.12},{\"x\":1.5498144E12,\"y\":107.11},{\"x\":1.5499008E12,\"y\":107.11},{\"x\":1.5499872E12,\"y\":107.09},{\"x\":1.5500736E12,\"y\":107.08},{\"x\":1.55016E12,\"y\":107.08},{\"x\":1.5504192E12,\"y\":107.07},{\"x\":1.5505056E12,\"y\":107.05},{\"x\":1.550592E12,\"y\":107.06},{\"x\":1.5506784E12,\"y\":107.06},{\"x\":1.5507648E12,\"y\":107.06}]}],\"chart\":{\"width\":1040},\"yAxis\":[{\"top\":100,\"height\":\"90%\"}],\"labels\":{\"items\":[{\"html\":\"收盤價\",\"style\":{\"left\":0,\"top\":0,\"color\":\"#4a4a4a\",\"fontSize\":\"14px\",\"fontWeight\":\"\",\"fontFamily\":\"\"}},{\"html\":\"107.0\",\"style\":{\"left\":60,\"top\":0,\"color\":\"red\",\"fontSize\":\"24px\",\"fontWeight\":\"\",\"fontFamily\":\"\"}}]}}}");
//			byte[] asBytes = ofPostRequest.execute().returnContent().asBytes();
//
//			return asBytes;
//		}
//	},
    
    // 這是 個股指標 會出現的html
    module1("module1") {
        @Override
        public Object handle(Bot bot, ReqResp rr) {  
        	
            String htmlTemplate = bot.webString("module1.html").getOr("");
            return htmlTemplate;
        }
    },
	
	//line bot push message
	pushMsg_post("pushMsg") {
		@Override
		public Object handle(Bot bot, ReqResp rr) throws ClientProtocolException, IOException, SQLException {
			StrMap reqBodyMap = rr.reqBodyMap();
			
			bot.pushMsg(reqBodyMap);
			return "成功";
		}
	},
	
	//個股指標
	module1_post("module1") {
		@Override
		public Object handle(Bot bot, ReqResp rr) throws UnsupportedEncodingException, SQLException {
			String htmlTemplate = ResourceUtil.loadString("/res/index.html");
			String result = java.net.URLDecoder.decode(rr.reqBody(), "UTF-8");
			String sym = result.split("=")[1];
				
			return bot.selectHonsetdb(sym);
		}
	},
	
	//拿到user訂閱的個股新聞集合url
	getSubURL_post("getSubURL"){
		@Override
		public Object handle(Bot bot, ReqResp rr) throws SQLException, ClientProtocolException, IOException {
			String htmlTemplate = ResourceUtil.loadString("/res/index.html");
			String result = java.net.URLDecoder.decode(rr.reqBody(), "UTF-8");
			String[] message = result.split("=");
			Set<String> subSet = bot.getSubSet(message[1]);

			return bot.MsgUtil.getNewsURL(subSet);
		}	
	},
	
	// 介紹Notify
    // 申請Notify https://notify-bot.line.me/my/services/new 時要填在 服務網址的
    // 如果填和Callback URL相同好像也不會怎樣(每有這個網址的入口) 
	notify("notify") {
		@Override
		public Object handle(Bot bot, ReqResp rr) {
			bot.webString("index.html").getOr("");
			String htmlTemplate = ResourceUtil.loadString("/res/index.html");
			return "歡迎使用Line notify服務";
		}
	},
	
	//push message 到 above notify
	notifymsg_post("notifymsg") {
		@Override
		public Object handle(Bot bot, ReqResp rr) throws ClientProtocolException, SQLException, IOException {
			Notify notify = new Notify();
			notify.pushMsg(rr.reqBodyMap().getOrNull("msg"), rr.reqBodyMap().getOrNull("imageThumbnail"), rr.reqBodyMap().getOrNull("imageFullsize"), rr.reqBodyMap().getOrNull("stickerPackageId"), rr.reqBodyMap().getOrNull("stickerId"));
			return "訊息推送成功!";
		}
	},
	
	//notify 連動之後 
	callback("callback") {
		@Override
		public Object handle(Bot bot, ReqResp rr) throws ClientProtocolException, IOException, SQLException {
			String htmlTemplate = ResourceUtil.loadString("/res/index.html");
			Notify notify = new Notify();

			// 拿到code 之後
			notify.handleNotify(rr.queryParam("code"));


			return "Notify 連動成功!";
		}
		
	},

	ping("Ping") {
		@Override
		public Object handle(Bot bot, ReqResp rr) {
			return "PONG:" + new Date().getTime();
		}
	},
	


	notfound("not found", new ReqUri("/*")) {
		@Override
		public Object handle(Bot bot, ReqResp rr) throws Exception {
			String sFile = rr.reqUri();
System.out.println(sFile);
			return bot.webString(sFile).getOr("找不到唷");
		}
	},;

	// -----------------------------------------

	WebCache m_webCache = WebCache.No;
	ReqUri m_uri;
	String m_sDesc;

	// -----------------------------------------

	BotWeb(String sDesc) {
		m_sDesc = sDesc;
	}

	BotWeb(String sDesc, ReqUri uri) {
		m_sDesc = sDesc;
		m_uri = uri;
	}

	BotWeb(String sDesc, WebCache webCache) {
		m_sDesc = sDesc;
		m_webCache = webCache;
	}

	BotWeb(String sDesc, ReqUri uri, WebCache webCache) {
		m_sDesc = sDesc;
		m_uri = uri;
		m_webCache = webCache;
	}

	// -----------------------------------------

	@Override
	public boolean isCenter() {
		return false;
	}

	@Override
	public WebCache shouldCache() {
		return m_webCache;
	}

	@Override
	public Opt<Lst<ReqUri>> uris() {
		return Opt.ofNullable(m_uri).map(uri -> Lst.of(uri));
    }

}
